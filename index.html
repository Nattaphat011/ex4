<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ฝึกคิดวิเคราะห์และแก้ปัญหา</title>
<link rel="icon" href="https://img.icons8.com/fluency/48/000000/brain.png"/>
<style>
body { font-family:'Segoe UI',sans-serif; background:#f0f4f8; margin:0; padding:0;}
.container { max-width:800px; margin:30px auto; padding:20px; background:#fff; border-radius:12px; box-shadow:0 4px 15px rgba(0,0,0,0.1);}
h2{color:#333;}
section{margin-bottom:30px;}
textarea{width:100%; height:60px; margin:5px 0; padding:8px; border-radius:6px; border:1px solid #ccc;}
button{padding:10px 20px; border:none; background:#007bff; color:#fff; border-radius:6px; cursor:pointer;}
button:hover{background:#0056b3;}
iframe{width:100%; height:500px; border:none; margin-top:20px;}
</style>
</head>
<body>
<div class="container">
<h1>ฝึกคิดวิเคราะห์และแก้ปัญหา</h1>

<!-- เกมต่าง ๆ -->
<section>
<h2>1. ถอยหลัง 3 ก้าว (3-step Backward Thinking)</h2>
<textarea placeholder="ก้าว 1: มุมมองของคุณ"></textarea>
<textarea placeholder="ก้าว 2: มุมมองของอีกฝ่าย"></textarea>
<textarea placeholder="ก้าว 3: มุมมองของคนนอก"></textarea>
</section>

<section>
<h2>2. ข้อดี-ข้อเสีย + มุมมองเวลา</h2>
<textarea placeholder="ข้อดีของวิธีแก้ปัญหา"></textarea>
<textarea placeholder="ข้อเสียของวิธีแก้ปัญหา"></textarea>
<textarea placeholder="ผล 1 สัปดาห์"></textarea>
<textarea placeholder="ผล 1 เดือน"></textarea>
<textarea placeholder="ผล 1 ปี"></textarea>
</section>

<section>
<h2>3. เกม 5 ทำไม? (5 Whys)</h2>
<textarea placeholder="ทำไมครั้งที่ 1"></textarea>
<textarea placeholder="ทำไมครั้งที่ 2"></textarea>
<textarea placeholder="ทำไมครั้งที่ 3"></textarea>
<textarea placeholder="ทำไมครั้งที่ 4"></textarea>
<textarea placeholder="ทำไมครั้งที่ 5"></textarea>
</section>

<section>
<h2>4. เกมสมมติฐาน (What-If Game)</h2>
<textarea placeholder="คำตอบและเหตุผล"></textarea>
</section>

<section>
<h2>5. การสะท้อนผล (Reflection)</h2>
<textarea placeholder="คุณได้เรียนรู้อะไรเกี่ยวกับตัวเอง?"></textarea>
<textarea placeholder="วิธีไหนที่ได้ผลดีที่สุดสำหรับคุณ?"></textarea>
<textarea placeholder="ครั้งต่อไปคุณจะลองทำอะไรใหม่ ๆ บ้าง?"></textarea>
</section>

<section>
<h2>6. เกมผ่อนคลาย: หาสิ่งของที่ซ่อนอยู่</h2>
<iframe src="https://th.crazygames.com/embed/seek-find-hidden-object-game" allowfullscreen></iframe>
<!-- บอกความรู้สึกที่ผู้ใช้เล่นแล้วรู้สึกยังไง -->
<textarea placeholder="คุณรู้สึกอย่างไรหลังจากเล่นเกมนี้?"></textarea>
<textarea placeholder="คุณคิดว่าเกมนี้ช่วยให้คุณผ่อนคลายหรือไม่? เพราะอะไร?"></textarea>
<textarea placeholder="คุณจะนำวิธีผ่อนคลายนี้ไปใช้ในชีวิตประจำวันอย่างไร?"></textarea>
</section>

<button id="submitBtn">ส่งข้อมูลไป Google Sheets</button>

<script>
// ใส่ URL ของ GAS Web App ที่ Deploy แล้ว
const webAppUrl = 'https://script.google.com/macros/s/AKfycbxs6OkWh1IXD1b7j3TwzmFaLhkpdZpajIsY-yzwQ5-EyIcOlNOqxQh8atfGNz5i7694/exec';

document.getElementById('submitBtn').onclick = async () => {
  const textareas = document.querySelectorAll('textarea');
  const data = Array.from(textareas).map((ta,i) => ({id:i+1, value:ta.value}));

  try {
    const res = await fetch(webAppUrl, {
      method: 'POST',
      body: JSON.stringify({answers: data}),
      headers: {'Content-Type':'application/json'}
    });
    const result = await res.json();
    
    if(result.status === "success"){
      alert("ส่งสำเร็จ ✅ ข้อมูลถูกบันทึกเรียบร้อย");
    } else {
      alert("เกิดข้อผิดพลาด ❌: " + result.message);
    }
  } catch (err) {
    alert("เกิดข้อผิดพลาด ❌: " + err);
  }
};
</script>

</div>
</body>
</html>
