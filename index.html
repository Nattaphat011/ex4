<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ฝึกคิดวิเคราะห์และแก้ปัญหา</title>
  <link rel="icon" href="https://img.icons8.com/fluency/48/000000/brain.png"/>
  <style>
    body { font-family: 'Segoe UI', sans-serif; background:#f0f4f8; margin:0; padding:0;}
    .container { max-width:800px; margin:30px auto; padding:20px; background:#fff; border-radius:12px; box-shadow:0 4px 15px rgba(0,0,0,0.1);}
    h1, h2 { color:#333; }
    section { margin-bottom:30px; }
    textarea { width:100%; height:60px; margin:5px 0; padding:8px; border-radius:6px; border:1px solid #ccc; }
    button { padding:10px 20px; border:none; background:#007bff; color:#fff; border-radius:6px; cursor:pointer; }
    button:hover { background:#0056b3; }
    iframe { width:100%; height:500px; border:none; margin-top:20px; }
  </style>
</head>
<body>

<div class="container">
  <h1>ฝึกคิดวิเคราะห์และแก้ปัญหา</h1>

  <!-- เกม 1: ถอยหลัง 3 ก้าว -->
  <section>
    <h2>1. ถอยหลัง 3 ก้าว (3-step Backward Thinking)</h2>
    <p>ให้ผู้ใช้จินตนาการว่าตนเองยืนอยู่ต่อหน้าของปัญหา แล้วให้คุณนั้นถอยหลัง 3ก้าว เพื่อมองในมุมมองที่ต่างออกไป และให้คุณตอบความคิดของคุณในแต่ละมุมมองว่าคุณจะทำอย่างไร
เขียนมุมมองของคุณและอีกฝ่ายในสถานการณ์ปัจจุบัน จากนั้นลองมองสถานการณ์จากมุมมองของคนนอก</p>
    <textarea id="step1" placeholder="ก้าว 1: มุมมองของคุณ"></textarea>
    <textarea id="step2" placeholder="ก้าว 2: มุมมองของอีกฝ่าย"></textarea>
    <textarea id="step3" placeholder="ก้าว 3: มุมมองของคนนอก"></textarea>
  </section>

  <!--แบบสอบถาม ใช่ หรือ ไม่ใช่ คุณเข้าใจถึงความคิดแนวทางมากขึ้นหรือไม่ -->
  <section>
    <h2>แบบสอบถาม</h2>
    <p>คุณเข้าใจถึงความคิดแนวทางมากขึ้นหรือไม่?</p>
    <label><input type="radio" name="understand" value="yes"> ใช่</label>
    <label><input type="radio" name="understand" value="no"> ไม่ใช่</label>
    <!-- หมายเหตุ -->
    <p><em>จากการตอบข้อมูลในแต่ละมุมมอง คุณเข้าใจถึงความคิด แนวทางมากขึ้นหรือไม่ มันอาจช่วยให้คุณลดอคติทางอารมณ์ และช่วยให้คุณมองปัญหาได้หลายมุมมองด้วยนะ คุณรู้สึกเข้าใจถึงปัญหานั้นมากขึ้นบ้างไหม</em></p>
  </section>


  <!-- เกม 2: ข้อดี-ข้อเสีย + มุมมองเวลา -->
  <section>
    <h2>2. ข้อดี-ข้อเสีย + มุมมองเวลา</h2>
    <textarea id="pros" placeholder="ข้อดีของวิธีแก้ปัญหา"></textarea>
    <textarea id="cons" placeholder="ข้อเสียของวิธีแก้ปัญหา"></textarea>
    <textarea id="week" placeholder="ผล 1 สัปดาห์"></textarea>
    <textarea id="month" placeholder="ผล 1 เดือน"></textarea>
    <textarea id="year" placeholder="ผล 1 ปี"></textarea>
  </section>

  <!-- เกม 3: 5 ทำไม? -->
  <section>
    <h2>3. เกม 5 ทำไม? (5 Whys)</h2>
    <p>ให้คุณนึกถึงปัญหานั้นที่คุณกำลังประสบอยู่ และให้ตั้งคำถามกับตัวเองว่า “ทำไม” ต่อเนื่องกัน 5 ครั้ง</p>
    <textarea id="why1" placeholder="ทำไมครั้งที่ 1"></textarea>
    <textarea id="why2" placeholder="ทำไมครั้งที่ 2"></textarea>
    <textarea id="why3" placeholder="ทำไมครั้งที่ 3"></textarea>
    <textarea id="why4" placeholder="ทำไมครั้งที่ 4"></textarea>
    <textarea id="why5" placeholder="ทำไมครั้งที่ 5"></textarea>
    <p><em>หากคุณสามารถถามและตอบตัวเองได้ครบ นั่นหมายถึงว่าคุณเข้าใจถึงรากเหง้าของปัญหา และนี่เป็นวิธีการแก้ปัญหาที่ไม่ได้แก้ที่ปลายเหตุ แต่เป็นการแก้ไขปัญหาโดยใช้จากสาเหตุที่เกิดขึ้นเลย</em></p>
  </section>

  <!-- เกม 4: What-If Game -->
  <section>
    <h2>4. เกมสมมติฐาน (What-If Game)</h2>
    <textarea id="whatif" placeholder="คำตอบและเหตุผล"></textarea>
  </section>

  <!-- เกม 5: Reflection -->
  <section>
    <h2>5. การสะท้อนผล (Reflection)</h2>
    <p>หลังจากที่คุณทำกิจกรรมต่างๆด้านบนไปข้างต้น คุณช่วยตอบฉันหน่อยได้ไหมคะ ว่าเป็นอย่างไรบ้าง</p>
    <textarea id="learn" placeholder="คุณได้เรียนรู้อะไรเกี่ยวกับตัวเอง?"></textarea>
    <textarea id="best" placeholder="วิธีไหนที่ได้ผลดีที่สุดสำหรับคุณ?"></textarea>
    <textarea id="next" placeholder="ครั้งต่อไปคุณจะลองทำอะไรใหม่ ๆ บ้าง?"></textarea>
  </section>

  <!-- เกมผ่อนคลาย -->
  <section>
    <h2>6. เกมผ่อนคลาย: หาสิ่งของที่ซ่อนอยู่</h2>
    <iframe src="https://th.crazygames.com/embed/seek-find-hidden-object-game" allowfullscreen></iframe>
  </section>

  <!-- ปุ่มส่งข้อมูลไป GAS -->
  <button id="submitBtn">ส่งข้อมูลไป Google Sheets</button>
</div>

<script>
  const webAppUrl = 'https://script.google.com/macros/s/AKfycbwSWfkdth6OcFPSEk4qllKM1mH24XhYFe1ljVP5gCOLbFMn4sFoJ7X7he-P_tzh7eNF/exec';

  document.getElementById('submitBtn').onclick = async () => {
    const data = [
      { question: 'ก้าว 1: มุมมองของคุณ', value: document.getElementById('step1').value },
      { question: 'ก้าว 2: มุมมองของอีกฝ่าย', value: document.getElementById('step2').value },
      { question: 'ก้าว 3: มุมมองของคนนอก', value: document.getElementById('step3').value },
      { question: 'เข้าใจถึงความคิดแนวทางมากขึ้นหรือไม่', value: document.querySelector('input[name="understand"]:checked') ? document.querySelector('input[name="understand"]:checked').value : '' },
      { question: 'ข้อดีของวิธีแก้ปัญหา', value: document.getElementById('pros').value },
      { question: 'ข้อเสียของวิธีแก้ปัญหา', value: document.getElementById('cons').value },
      { question: 'ผล 1 สัปดาห์', value: document.getElementById('week').value },
      { question: 'ผล 1 เดือน', value: document.getElementById('month').value },
      { question: 'ผล 1 ปี', value: document.getElementById('year').value },
      { question: 'ทำไมครั้งที่ 1', value: document.getElementById('why1').value },
      { question: 'ทำไมครั้งที่ 2', value: document.getElementById('why2').value },
      { question: 'ทำไมครั้งที่ 3', value: document.getElementById('why3').value },
      { question: 'ทำไมครั้งที่ 4', value: document.getElementById('why4').value },
      { question: 'ทำไมครั้งที่ 5', value: document.getElementById('why5').value },
      { question: 'คำตอบและเหตุผล', value: document.getElementById('whatif').value },
      { question: 'คุณได้เรียนรู้อะไรเกี่ยวกับตัวเอง?', value: document.getElementById('learn').value },
      { question: 'วิธีไหนที่ได้ผลดีที่สุดสำหรับคุณ?', value: document.getElementById('best').value },
      { question: 'ครั้งต่อไปคุณจะลองทำอะไรใหม่ ๆ บ้าง?', value: document.getElementById('next').value }
    ];

    try {
      const res = await fetch(webAppUrl, {
        method: 'POST',
        body: JSON.stringify({ answers: data }),
        headers: { 'Content-Type': 'application/json' }
      });
      const result = await res.json();
      if (result.status === 'success') {
        alert(`ส่งสำเร็จ! ข้อมูลถูกบันทึกในแถวที่ ${result.row}`);
      } else {
        alert('เกิดข้อผิดพลาดในการส่งข้อมูล');
      }
    } catch (err) {
      alert('ไม่สามารถเชื่อมต่อกับเซิร์ฟเวอร์');
    }
  };
</script>

</body>
</html>
