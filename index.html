<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ฝึกคิดวิเคราะห์และแก้ปัญหา</title>
  <link rel="icon" href="https://img.icons8.com/fluency/48/000000/brain.png"/>
 <style>
  @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@300;500;700&display=swap');

  body {
    margin: 0;
    font-family: 'Kanit', sans-serif;
    background: linear-gradient(135deg, #fce7f3, #e0f2fe, #ede9fe, #fef9c3);
    background-size: 400% 400%;
    animation: bgShift 12s ease infinite;
    color: #444;
    line-height: 1.7;
  }
  @keyframes bgShift {
    0% {background-position: 0% 50%;}
    50% {background-position: 100% 50%;}
    100% {background-position: 0% 50%;}
  }
 .floating-img {
      display: block;
      margin: 0 auto 25px auto;
      width: 150px;
      animation: float 3s ease-in-out infinite;
      max-width: 40%;
    }
  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-12px); }
  }
  /* Hero Section */
  .hero {
    text-align: center;
    padding: 80px 20px 60px;
    background: linear-gradient(145deg, rgba(254,205,211,0.6), rgba(209,213,255,0.6));
    backdrop-filter: blur(12px);
    border-bottom-left-radius: 60px;
    border-bottom-right-radius: 60px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.08);
  }
  .hero h1 {
    font-size: 2.7rem;
    color: #374151;
    margin-bottom: 15px;
  }
  .hero p {
    font-size: 1.2rem;
    color: #6b7280;
  }

  /* Container */
  .container {
    max-width: 950px;
    margin: -40px auto 50px;
    padding: 30px;
    border-radius: 30px;
    background: rgba(255,255,255,0.85);
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
  }

  /* Sections */
  section {
    background: #fff;
    border: 3px solid transparent;
    border-radius: 22px;
    padding: 25px;
    margin-bottom: 35px;
    background-clip: padding-box;
    position: relative;
    box-shadow: 0 6px 15px rgba(0,0,0,0.05);
  }
  section::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: 22px;
    padding: 2px;
    background: linear-gradient(135deg, #fbcfe8, #a5f3fc, #c4b5fd, #fde68a);
    -webkit-mask: 
      linear-gradient(#fff 0 0) content-box, 
      linear-gradient(#fff 0 0);
    -webkit-mask-composite: destination-out;
            mask-composite: exclude;
  }

  h2 {
    font-size: 1.5rem;
    margin-bottom: 15px;
    background: linear-gradient(90deg,#f472b6,#60a5fa,#a78bfa);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  textarea, input[type="text"] {
    width: 100%;
    padding: 14px;
    border-radius: 14px;
    border: 1px solid #e5e7eb;
    background: #fafafa;
    color: #374151;
    margin-top: 10px;
    margin-bottom: 20px;
    font-size: 1rem;
    transition: all 0.3s;
  }
  textarea:focus, input:focus {
    outline: none;
    border: 1px solid #a78bfa;
    box-shadow: 0 0 8px rgba(167,139,250,0.4);
    background: #fff;
  }

  button {
    display: block;
    width: 100%;
    padding: 15px;
    border: none;
    border-radius: 20px;
    background: linear-gradient(135deg,#f9a8d4,#93c5fd,#c4b5fd,#fde68a);
    background-size: 250% 250%;
    color: #374151;
    font-size: 1.15rem;
    font-weight: 600;
    cursor: pointer;
    margin-top: 25px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.1);
    animation: gradientShift 8s ease infinite;
    transition: transform 0.2s;
  }
  button:hover {
    transform: scale(1.04);
    box-shadow: 0 12px 25px rgba(0,0,0,0.2);
  }

  /* Image Modal */
  img.goal-img {
    display: block;
    margin: 0 auto 20px;
    width: 100%;
    max-width: 180px;
    border-radius: 25px;
    box-shadow: 0 6px 12px rgba(0,0,0,0.15);
    cursor: zoom-in;
  }

  .img-modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left:0;top:0;width:100%;height:100%;
    background: rgba(0,0,0,0.75);
    overflow:auto;
    padding-top:60px;
  }
  .img-modal-content {
    display: block;
    margin:auto;
    max-width: 90%;
    max-height: 85%;
    border-radius: 25px;
    box-shadow: 0 0 20px rgba(255,255,255,0.4);
  }
  .img-close {
    position: absolute;
    top: 20px; right: 40px;
    font-size: 45px; font-weight: bold;
    color:#fff;
    cursor: pointer;
  }
  .img-close:hover {color:#f87171;}

  em {
  display: block;
  text-align: center;
  margin-bottom: 15px;
  font-size: 0.9em;
  color: #555;
}
  </style>
</head>
<body>

<div class="container">
  <img src="images/หัวข้อ4.jpg" 
     alt="รูปภาพ" 
     class="goal-img"
     id="myImage">
<!-- หมายเหตุสามารถแตะรูปภาพเพื่อขยายภาพได้ -->
 <em> (สามารถแตะรูปภาพเพื่อขยายภาพได้) </em>
  <!-- โลโก้ -->
  <img src="images/4.png"
       alt="โลโก้วิทยาลัย"
       class="floating-img">

     <div id="imgModal" class="img-modal">
  <span class="img-close">&times;</span>
  <img class="img-modal-content" id="imgModalContent">
  <div id="imgCaption"></div>
</div>

  <h1>ฝึกคิดวิเคราะห์และแก้ปัญหา</h1>

     <!-- เกม 1 -->
    <section>
      <h2>1. ถอยหลัง 3 ก้าว</h2>
      <textarea id="step1" placeholder="ก้าว 1: มุมมองของคุณ"></textarea>
      <textarea id="step2" placeholder="ก้าว 2: มุมมองของอีกฝ่าย"></textarea>
      <textarea id="step3" placeholder="ก้าว 3: มุมมองของคนนอก"></textarea>
      <p>คุณเข้าใจถึงความคิดแนวทางมากขึ้นหรือไม่?</p>
      <label><input type="radio" name="understand" value="yes"> ใช่</label>
      <label><input type="radio" name="understand" value="no"> ไม่ใช่</label>
    </section>

    <!-- เกม 2 -->
    <section>
      <h2>2. ข้อดี-ข้อเสีย</h2>
      <textarea id="pros" placeholder="ข้อดีของวิธีแก้ปัญหา"></textarea>
      <textarea id="cons" placeholder="ข้อเสียของวิธีแก้ปัญหา"></textarea>
    </section>

    <!-- เกม 3 -->
    <section>
      <h2>3. เกม 5 ทำไม?</h2>
      <textarea id="why1" placeholder="ทำไมครั้งที่ 1"></textarea>
      <textarea id="why2" placeholder="ทำไมครั้งที่ 2"></textarea>
      <textarea id="why3" placeholder="ทำไมครั้งที่ 3"></textarea>
      <textarea id="why4" placeholder="ทำไมครั้งที่ 4"></textarea>
      <textarea id="why5" placeholder="ทำไมครั้งที่ 5"></textarea>
    </section>

    <!-- เกม 4 -->
    <section>
      <h2>4. การสะท้อนผล</h2>
      <textarea id="learn" placeholder="คุณได้เรียนรู้อะไรเกี่ยวกับตัวเอง?"></textarea>
      <textarea id="best" placeholder="วิธีไหนที่ได้ผลดีที่สุดสำหรับคุณ?"></textarea>
      <textarea id="next" placeholder="ครั้งต่อไปคุณจะลองทำอะไรใหม่ ๆ บ้าง?"></textarea>
    </section>

    <!-- เกม 5 -->
    <section>
      <h2>5. เกมผ่อนคลาย</h2>
      <input type="text" id="level" placeholder="1-10">
    </section>

    <!-- ปุ่มส่ง -->
    <button id="submitBtn">บันทึกผล</button>
  </div>


<script>
  const webAppUrl = 'https://script.google.com/macros/s/AKfycbzgHWh2fejs_74UXfHIscDbfC95OOK5s_RuGBKopoGx5o6h57GK0FmKEBFsZFb7vXaj/exec';

  document.getElementById('submitBtn').onclick = async () => {
    const data = [
      { question: 'ก้าว 1: มุมมองของคุณ', value: document.getElementById('step1').value },
      { question: 'ก้าว 2: มุมมองของอีกฝ่าย', value: document.getElementById('step2').value },
      { question: 'ก้าว 3: มุมมองของคนนอก', value: document.getElementById('step3').value },
      { question: 'เข้าใจถึงความคิดแนวทางมากขึ้นหรือไม่', value: document.querySelector('input[name="understand"]:checked') ? document.querySelector('input[name="understand"]:checked').value : '' },
      { question: 'ข้อดีของวิธีแก้ปัญหา', value: document.getElementById('pros').value },
      { question: 'ข้อเสียของวิธีแก้ปัญหา', value: document.getElementById('cons').value },
      { question: 'ทำไมครั้งที่ 1', value: document.getElementById('why1').value },
      { question: 'ทำไมครั้งที่ 2', value: document.getElementById('why2').value },
      { question: 'ทำไมครั้งที่ 3', value: document.getElementById('why3').value },
      { question: 'ทำไมครั้งที่ 4', value: document.getElementById('why4').value },
      { question: 'ทำไมครั้งที่ 5', value: document.getElementById('why5').value },
      { question: 'คุณได้เรียนรู้อะไรเกี่ยวกับตัวเอง?', value: document.getElementById('learn').value },
      { question: 'วิธีไหนที่ได้ผลดีที่สุดสำหรับคุณ?', value: document.getElementById('best').value },
      { question: 'ครั้งต่อไปคุณจะลองทำอะไรใหม่ ๆ บ้าง?', value: document.getElementById('next').value },
      { question: 'ระดับไหน', value: document.getElementById('level').value }
    ];

    const params = encodeURIComponent(JSON.stringify({ answers: data }));

    try {
      const res = await fetch(`${webAppUrl}?data=${params}`);
      const result = await res.json();

      if (result.status === "success") {
        alert(`ส่งสำเร็จ! ข้อมูลถูกบันทึกในแถวที่ ${result.row}`);
      } else {
        alert("เกิดข้อผิดพลาดในการส่งข้อมูล");
      }
    } catch (err) {
      alert("ไม่สามารถเชื่อมต่อกับเซิร์ฟเวอร์");
    }
  };

  // const modal = document.getElementById('imgModal');
  // const img = document.getElementById('myImage');
  // const modalImg = document.getElementById('imgModalContent');
  // const caption = document.getElementById('imgCaption');
  // const closeBtn = document.getElementsByClassName('img-close')[0];

  // img.onclick = function() {
  //   modal.style.display = "block";
  //   modalImg.src = this.src;
  //   caption.innerHTML = this.alt;
  // }

  // closeBtn.onclick = function() {
  //   modal.style.display = "none";
  // }

  // // ปิด modal เมื่อคลิกที่พื้นหลัง
  // modal.onclick = function(e) {
  //   if (e.target === modal) {
  //     modal.style.display = "none";
  //   }
  // }

   const modal = document.getElementById('imgModal');
  const img = document.getElementById('myImage');
  const modalImg = document.getElementById('imgModalContent');
  const caption = document.getElementById('imgCaption');
  const closeBtn = document.getElementsByClassName('img-close')[0];

  img.onclick = function() {
    modal.style.display = "block";
    modalImg.src = this.src;
    caption.innerHTML = this.alt;
  }
  closeBtn.onclick = function() { modal.style.display = "none"; }
  modal.onclick = function(e) {
    if (e.target === modal) modal.style.display = "none";
  }
</script>
</body>
</html>
